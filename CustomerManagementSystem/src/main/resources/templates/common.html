<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org"
    xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
	
<!--共通headerで置き換える-->
<head th:replace="~{parts/parts :: meta_header('top',~{::link},~{::script})}">
	<title></title>
</head>

<body>
	<!--共通化したfragmentを呼び出す-->
	<div th:replace="parts/parts::nav"></div>
	<p th:text="'ようこそ '+ ${user.getUsername} + ' さん'"></p>
      
	<main>
		<h1>顧客一覧</h1>
		<a th:href="@{customer/create}">新規登録</a>
		<!-- th:action="@{}"…送信先を指定
		　　 inputのname属性…コントローラーの@RequestParam("searchByKeyword")と紐づけ
		     placeholder属性…入力がない場合に表示する案内文字
		-->
		<form th:action="@{/common/search}" method="get">
			<input type="text" name="searchByKeyword" placeholder="検索キーワードを入力してください">
			<button type="submit">検索</button>
		</form>
		
		<table>
			<tr>
				<th>ID</th>
				<th>名前</th>
				<th>区分</th>
				<th>担当</th>
				<th></th>
				<th></th>
			</tr>
			<tr th:each="customer:${customers}">
				<td th:text="${customer.customerId}"></td>
				<td th:text="${customer.customerName}"></td>
				<!-- trueなら個人、falseなら法人と表示する -->
				<td th:if="${customer.individual}" >個人</td>
				<td th:if="${!customer.individual}" >法人</td>
				<!-- 担当者の名前を表示させる -->
				<td th:text="${customer.account.username}"></td>
				<td>
					<!--URLの最後にidのパラーメーターを送ってcontrollerでidとして受け取る -->
					<form th:action="@{customer/confirmation/{id}(id=${customer.customerId})}" method="GET">
					<button type="submit" name ="confirmation" th:value="${customer.customerId}" >確認</button>
					</form>
				</td>
				<td>
					<form th:action="@{customer/update/{id}(id=${customer.customerId})}" method="GET">
					<button type="submit" name="update" th:value="${customer.customerId}" >変更</button>
					</form>
				</td>
			</tr>
		</table>
	</main>
</body>
</html>
